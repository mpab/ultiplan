#!/bin/sh

[ -z "$ULTIPLAN_HOME" ] && echo "ERROR: ULTIPLAN_HOME is not set" && exit

# TODO: this is a hack for windows, needs to be cross-platform
# utiliplanProject=$PWD
utiliplanProject=$(cmd.exe /c cd)
cd $ULTIPLAN_HOME/api
cp env .env
echo "utiliplanProject=$utiliplanProject" >> .env
mintty sh -mc "yarn start &>/dev/null < /dev/null &"

cd $ULTIPLAN_HOME/ui
mintty sh -mc "yarn start &>/dev/null < /dev/null &"

# TODO: implement check to see if API & UI are running
# ping -n 5 localhost
# curl http://localhost:3001/api 
# curl http://localhost:3000
